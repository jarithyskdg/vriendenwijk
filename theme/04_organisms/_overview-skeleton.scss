@use "../00_common/_skeleton.scss" as skeleton;

/* ------------------------------------------
   Loading state toggles (animated)
   - Avoid display:none (not animatable)
   - Cross-fade skeleton and content
------------------------------------------ */

$fade-duration: 280ms;
$fade-ease: ease;

/* Base states:
   overview.html starts with body.is-loading-overview
*/
.overview-skeleton__header,
.overview-skeleton__card,
.divider-skeleton {
    opacity: 1;
    visibility: visible;
    transition: opacity $fade-duration $fade-ease, visibility $fade-duration $fade-ease;
}

/* IMPORTANT:
   Don't hide .overview__header itself because the skeleton header lives inside it.
   Only hide the REAL title and the rest of the real content.
*/
.overview__title,
.card--overview,
.divider,
a.link {
    opacity: 0;
    visibility: hidden;
    transition: opacity $fade-duration $fade-ease, visibility $fade-duration $fade-ease;
}

/* ------------------------------------------
   GSAP gate: prevent flash before gsap.set() runs
------------------------------------------ */
body.is-overview-animating {

    .overview__title,
    .card--overview,
    .divider,
    a.link {
        opacity: 0 !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }
}

/* While loading: keep real content non-interactive */
body.is-loading-overview {

    .overview__title,
    .card--overview,
    .divider,
    a.link {
        pointer-events: none;
    }
}

/* When loading is done */
body:not(.is-loading-overview) {

    .overview-skeleton__header,
    .overview-skeleton__card,
    .divider-skeleton {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
    }

    .overview__title,
    .card--overview,
    .divider,
    a.link {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }
}

/* ------------------------------------------
   Skeleton header (matches the overview title area)
------------------------------------------ */
.overview-skeleton__header {
    width: min(520px, 85%);
    height: 54px;
    border-radius: 14px;
    background: skeleton.$skeleton-bg;
    margin: 0 auto 48px;
    /* matches .overview__header spacing */
    @include skeleton.skeleton-shimmer;
}

/* ------------------------------------------
   Skeleton cards (direct children of .overview__cards)
------------------------------------------ */
.overview-skeleton__card {
    width: 100%;
    min-height: 400px;
    border-radius: 14px;
    background: skeleton.$skeleton-bg;

    @include skeleton.skeleton-shimmer;
}

/* ------------------------------------------
   Skeleton divider bar (simple)
------------------------------------------ */
.divider-skeleton {
    width: 100%;
    height: 40px;
    border-radius: 14px;
    background: skeleton.$skeleton-bg;

    margin: 32px 0 48px 0;

    @include skeleton.skeleton-shimmer;
}